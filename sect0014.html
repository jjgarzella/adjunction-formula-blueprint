<!DOCTYPE html>
<html lang="en">
<head>
<script>
  MathJax = { 
    tex: {
		    inlineMath: [['$','$'], ['\\(','\\)']]
	} }
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<meta name="generator" content="plasTeX" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Blueprint for the Adjunction Formula: Coherent Sheaves and Stalks</title>
<link rel="next" href="sect0015.html" title="Irreducible Schemes" />
<link rel="prev" href="sect0013.html" title="Kahler differentials" />
<link rel="up" href="sect0009.html" title="Adjunction Formula" />
<link rel="stylesheet" href="styles/theme-white.css" />
<link rel="stylesheet" href="styles/amsthm.css" />
</head>

<body>
<header>
<svg  id="toc-toggle" class="icon icon-list-numbered "><use xlink:href="symbol-defs.svg#icon-list-numbered"></use></svg>
<h1 id="doc_title"><a href="index.html">Blueprint for the Adjunction Formula</a></h1>
</header>

<div class="wrapper">
<nav class="toc">
<ul class="sub-toc-0">
<li class="">
  <a href="sect0001.html"><span class="toc_ref">1</span> <span class="toc_entry">Commutative Algebra Preliminaries</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sect0002.html"><span class="toc_ref">1.1</span> <span class="toc_entry">Projective Resolutions</span></a>
 </li>
<li class="">
  <a href="sect0003.html"><span class="toc_ref">1.2</span> <span class="toc_entry">Dimension Theory</span></a>
 </li>
<li class="">
  <a href="sect0004.html"><span class="toc_ref">1.3</span> <span class="toc_entry">Regular elements and sequences</span></a>
 </li>
<li class="">
  <a href="sect0005.html"><span class="toc_ref">1.4</span> <span class="toc_entry">Associated Primes</span></a>
 </li>
<li class="">
  <a href="sect0006.html"><span class="toc_ref">1.5</span> <span class="toc_entry">Depth and Regular Sequences</span></a>
 </li>
<li class="">
  <a href="sect0007.html"><span class="toc_ref">1.6</span> <span class="toc_entry">Auslander-Buchsbaum Formula</span></a>
 </li>
<li class="">
  <a href="sect0008.html"><span class="toc_ref">1.7</span> <span class="toc_entry">Proof of Auslander-Buchbaum-Serre</span></a>
 </li>

  </ul>
 </li>
<li class=" active">
  <a href="sect0009.html"><span class="toc_ref">2</span> <span class="toc_entry">Adjunction Formula</span></a>
  <span class="expand-toc">▼</span>
  <ul class="sub-toc-1 active">
     <li class="">
  <a href="sect0010.html"><span class="toc_ref">2.1</span> <span class="toc_entry">Nakayama’s Lemma and Corollaries</span></a>
 </li>
<li class="">
  <a href="sect0011.html"><span class="toc_ref">2.2</span> <span class="toc_entry">Regular Rings</span></a>
 </li>
<li class="">
  <a href="sect0012.html"><span class="toc_ref">2.3</span> <span class="toc_entry">Misc Commutative Algebra</span></a>
 </li>
<li class="">
  <a href="sect0013.html"><span class="toc_ref">2.4</span> <span class="toc_entry">Kahler differentials</span></a>
 </li>
<li class=" active current">
  <a href="sect0014.html"><span class="toc_ref">2.5</span> <span class="toc_entry">Coherent Sheaves and Stalks</span></a>
 </li>
<li class="">
  <a href="sect0015.html"><span class="toc_ref">2.6</span> <span class="toc_entry">Irreducible Schemes</span></a>
 </li>
<li class="">
  <a href="sect0016.html"><span class="toc_ref">2.7</span> <span class="toc_entry">Left-exactness of conormal bundle</span></a>
 </li>
<li class="">
  <a href="sect0017.html"><span class="toc_ref">2.8</span> <span class="toc_entry">Main Proof</span></a>
 </li>

  </ul>
 </li>
<li ><a href="dep_graph_section_1.html">Section 1 graph</a></li>
<li ><a href="dep_graph_section_2.html">Section 2 graph</a></li>
</ul>
</nav>

<div class="content">
<div class="content-wrapper">


<div class="main-text">
<h2 id="a0000000015">2.5 Coherent Sheaves and Stalks</h2>
<p><div class="definition_thmwrapper" id="def:noetherian_scheme">
  <div class="definition_thmheading">
    <span class="definition_thmcaption">
    Definition
    </span>
    <span class="definition_thmlabel">2.5.1</span>
    <div class="thm_icons">
    <a class="icon proof" href="sect0014.html#def:noetherian_scheme">#</a>

  </div>
  </div>
  <div class="definition_thmcontent">
  <p> Let \(X\) be a scheme. We say \(X\) is <i class="itshape">locally noetherian</i> if there exists an open affine cover \(\{ U_{i} = \operatorname {Spec}A_{i}\} \) such that all \(A_{i}\) are noetherian rings. </p>

  </div>
</div> </p>
<p><div class="lemma_thmwrapper" id="lem:stalks_preserve_colimits">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">2.5.2</span>
    <div class="thm_icons">
    <a class="icon proof" href="sect0014.html#lem:stalks_preserve_colimits">#</a>
    <a class="icon proof" href="sect0014.html#a0000000058"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p> The functor on sheaves of abelian groups (and in particular, quasi-coherent sheaves) on a scheme \(X\) which takes a sheaf \(\mathcal{F}\) to its stalk at the point \(x\), \(\mathcal{F}_x\), is a functor that preserves colimits. </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000058">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▼</span>
  </div>
  <div class="proof_content">
  <p>Taking stalks is itself a colimit, and colimits commute with colimits. </p>

  </div>
</div>
<p><div class="theorem_thmwrapper" id="thm:stalk_exact_iff_sheaf_exact">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">2.5.3</span>
    <div class="thm_icons">
    <a class="icon proof" href="sect0014.html#thm:stalk_exact_iff_sheaf_exact">#</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="sect0014.html#lem:stalks_preserve_colimits">Lemma 2.5.2</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="theorem_thmcontent">
  <p>  Consider an exact sequence of abelian (coherent) sheaves on a scheme. Can be left-exact, right-exact, exact in the middle, short exact, longer, anything. The seqeunce is exact iff it exact on all stalks. </p>

  </div>
</div> </p>
<p><div class="corollary_thmwrapper" id="cor:stalk_preserves_quotients">
  <div class="corollary_thmheading">
    <span class="corollary_thmcaption">
    Corollary
    </span>
    <span class="corollary_thmlabel">2.5.4</span>
    <div class="thm_icons">
    <a class="icon proof" href="sect0014.html#cor:stalk_preserves_quotients">#</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="sect0014.html#thm:stalk_exact_iff_sheaf_exact">Theorem 2.5.3</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="corollary_thmcontent">
  <p>  A stalk of a quotient of ideal sheaves is isomoprhic to the quotient of the stalks of the ideal sheaves. </p>

  </div>
</div> </p>
<p><div class="lemma_thmwrapper" id="lem:affine_stalk_free_implies_locally_free">
  <div class="lemma_thmheading">
    <span class="lemma_thmcaption">
    Lemma
    </span>
    <span class="lemma_thmlabel">2.5.5</span>
    <div class="thm_icons">
    <a class="icon proof" href="sect0014.html#lem:affine_stalk_free_implies_locally_free">#</a>
    <a class="icon proof" href="sect0014.html#a0000000059"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>

  </div>
  </div>
  <div class="lemma_thmcontent">
  <p> Let \(A\) be a ring, and \(M\) an \(A\)-module. Suppose that, for some prime ideal \(\mathfrak {p}\), \(M_{\mathfrak {p}}\) is a free \(A_{\mathfrak {p}}\)-module. Then there exists an element \(f \in A \smallsetminus \mathfrak {p}\) such that \(M_{f}\) is a free \(A_{f}\)-module. </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000059">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▼</span>
  </div>
  <div class="proof_content">
  <p>This is exactly the same proof as the next lemma, minus the reduction to being an affine scheme. </p>

  </div>
</div>
<p><div class="theorem_thmwrapper" id="thm:stalk_free_implies_locally_free">
  <div class="theorem_thmheading">
    <span class="theorem_thmcaption">
    Theorem
    </span>
    <span class="theorem_thmlabel">2.5.6</span>
    <span class="theorem_thmtitle">Hartshorne Exercise II.5.7a</span>
    <div class="thm_icons">
    <a class="icon proof" href="sect0014.html#thm:stalk_free_implies_locally_free">#</a>
    <a class="icon proof" href="sect0014.html#a0000000060"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="sect0014.html#lem:affine_stalk_free_implies_locally_free">Lemma 2.5.5</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="theorem_thmcontent">
  
<p>Let \(X\) be a locally noetherian scheme, and let \(\mathcal{F}\) be a coherent sheaf. If the stalk \(\mathcal{F}_{x}\) is a free \(\mathcal{O}_{X,x} \)-module for some point \(x \in X\), then there exists a neighborhood \(U\) containing \(x\) such that \(\mathcal{F}|_{U}\) is free. </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000060">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▼</span>
  </div>
  <div class="proof_content">
  <p> WLOG, we can assume that \(X\) is affine, so \(X = \operatorname {Spec}A\), and furthermore we can assume \(A\) is noetherian. Indeed, take an open affine noetherian cover as guarenteed by local noetherianity. Then \(x\) is contained in some neighborhood \(U = \operatorname {Spec}A\) in the cover. If we show the theorem for \(\operatorname {Spec}A\), then we have shown it for \(X\). </p>
<p>Now, as \(\mathcal{F}\) is a coherent sheaf on \(A\), \(\mathcal{F} \cong \tilde{M}\) for some finitely generated module \(M\) on \(A\). \(x\), being a point of \(\operatorname {Spec}A\), is/corresponds to a prime ideal \(\mathfrak {p}\) in \(A\). Now, our assumption about freeness of the stalk says that \(M_{\mathfrak {p}} \cong A_{\mathfrak {p}}^{\oplus n}\) for some \(n\). Indeed, \(M_{\mathfrak {p}}\) is the stalk of \(\tilde{M}\) and \(A_{\mathfrak {p}}\) is the local ring of \(\operatorname {Spec}A\) at \(\mathfrak {p}\). Let \(m_{1} , \ldots , m_{n}\) the a basis/free generating set for \(M_{\mathfrak {p}}\). In other words, \(m_{i}\) is the image (along some isomorphism \(A_{\mathfrak {p}}^{\oplus n}\)) of \((0, \ldots , 1, \ldots , 0) \in A_{\mathfrak {p}}^{\oplus n}\) where the \(1\) is in the \(i\)-th place. Since the \(m_{i}\) are elements of the stalk \(\mathcal{F}_{x} \cong M_{\mathfrak {p}}\), we can choose a neighborhood \(U^{\prime }\) of \(x\) with representatives \(m_{1}^{\prime }, \ldots , m_{n}^{\prime }\), whose images in the stalk are the \(m_{i}\). Indeed, we can do this individually for each \(m_{i}\), and since there are finitely many, we can choose \(U^{\prime }\) a neighborhood which dominates each of them in the diagram (i.e. a neighborhood which is contained in all of them, for example the intersection). Moreover, we can choose \(U^{\prime }\) to be affine by taking a smaller neighborhood (\(X\) is a scheme). If we prove the theorem for \(U^{\prime }\), then we have proven it for \(U\), so we can assume that \(U = U^{\prime }\). Aside: we can see that the \(m_{i}^{\prime }\) here aren’t zero, because there is a ring map from the sections over \(U^{\prime }\) to the stalk, and the images are nontrivial in the stalk. </p>
<p>Let \(x_{1}, \ldots , x_{k}\) be a finite generating set for \(M\). Now, we have the following equations in \(M_{\mathfrak {p}}\): </p>
<div class="displaymath" id="a0000000061">
  \[  \frac{x_{i}}{1} = \sum _{j=1}^{n} \frac{a_{ij}}{b_{ij}} m_{j} . \]
</div>
<p> Aside: if \(\frac{x_{i}}{1} = 0\), then all the \(a_{ij}\) are zero and the \(b_{ij}\) are \(1\) and the rest of the proof is not affected. </p>
<p>Using the characterization of when elements of the localization are zero (i.e. that they are \(s\)-torsion for some \(s \in A \smallsetminus \mathfrak {p} \)), we have the equations </p>
<div class="displaymath" id="a0000000062">
  \[  t_{i}\prod _{}^{} b_{ij} \left(x_{i} - \sum _{j}^{} \frac{a_{ij}}{b_{ij}} m^{\prime }_{i} \right) = 0  \]
</div>
<p> for some \(t_{i} \in A \smallsetminus \mathfrak {p}\), where the sum takes place in in \(M\) (which is a module over \(A\)). Note that we must have the factor of \(\prod _{}^{} b_{ij} \) as one multiply “top and bottom” by this term to put the element \(x_{i} - \sum _{}^{} \frac{a_{ij}}{b_{ij}}m_{i} \) into the form \(\frac{p}{q}\) with \(p,g \in M\). </p>
<p>Let \(b \colonequals \prod _{i}^{} t_{i} \prod _{i,j}^{} b_{ij}\). We know that the \(\frac{x_{i}}{1}\) generate \(M_{b}\) as an \(A_{b}\)-module by the characterization of elements in the localization as fractions (given an element of \(M {b}\), one has an equation in \(M\) for its numerator, and then one over its denominator is in \(A_{b}\)). Thus, the equations above and the fact that \(A \smallsetminus \mathfrak {p}\)-torsion is the kernel of the localization map show that \(m_{i}^{\prime }\) generate \(M_{b}\). </p>
<p>Thus, we have that the following map </p>
<div class="displaymath" id="a0000000063">
  \begin{align*}  A_{b}^{\oplus n} & \longrightarrow M_{b} \\ (0,\ldots ,0,1,0,\ldots ,0) & \longmapsto m_{i}^{\prime } \end{align*}
</div>
<p> is surjective (where the \(1\) is in the \(i\)-th place). Let the Kernel of the above map be denoted \(K\). We want to consider the exact sequence </p>
<div class="displaymath" id="a0000000064">
  \[  \begin{tikzcd} 
	0 \arrow{r}{} & K \arrow{r}{} & 
	A_{b}^{\oplus n} \arrow{r}{} & M_{b} \arrow{r}{} & 0
	\end{tikzcd} . \]
</div>
<p>As \(A\) is noetherian, \(A_{b}\) is noetherian, and thus so is \(A_{b}^{\oplus n}\). Thus, \(K\), which is a submodule of \(a_{b}^{\oplus n}\), is finitely generated, say by \(k_{1}, \ldots , k_{\ell }\). </p>
<p>Now, we apply the localization functor to the above exact sequence. However, we note that the second (nontrivial) map is indeed the same map as the isomorphism we gave in the first place. Thus, we conclude that \(K_{\mathfrak {p}} = 0\). This means, by the characterization of the kernel of a localization map, that there are \(s_{i} \in A \smallsetminus \mathfrak {p}\) such that \(s_{i}k_{i} = 0\) in \(A\) for all \(i\). (the same is true if we replace \(A\) with \(A_{b}\), one can use whichever ring is more convenient). Now, if we let \(b^{\prime } = b \prod _{i}^{} s_{i} \), then we see that by the equations above and the characterization of the kernel of the localization as torsion, that \(K_{b^{\prime }} = 0\). This means, by the exact sequence above and/or the fact that kernels commute with localization, that \(A_{b^{\prime }}^{\oplus n} \cong M_{b^{\prime }}\), and we have what we want. </p>

  </div>
</div>
<p><div class="corollary_thmwrapper" id="cor:fintype_stalk_free_implies_locally_free">
  <div class="corollary_thmheading">
    <span class="corollary_thmcaption">
    Corollary
    </span>
    <span class="corollary_thmlabel">2.5.7</span>
    <div class="thm_icons">
    <a class="icon proof" href="sect0014.html#cor:fintype_stalk_free_implies_locally_free">#</a>
    <a class="icon proof" href="sect0014.html#a0000000065"><svg  class="icon icon-cogs "><use xlink:href="symbol-defs.svg#icon-cogs"></use></svg>
</a>
    <button class="modal"><svg  class="icon icon-mindmap "><use xlink:href="symbol-defs.svg#icon-mindmap"></use></svg>
</button>
    <div class="modal-container">
      <div class="modal-content">
        <header>
          <h1>Uses</h1>
          <button class="closebtn"><svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        </header>
                <ul class="uses">
          <li><a href="sect0014.html#thm:stalk_free_implies_locally_free">Theorem 2.5.6</a></li>
          <li><a href="sect0012.html#thm:hilbert_basis">Theorem 2.3.3</a></li>
        </ul>

      </div>
    </div>

  </div>
  </div>
  <div class="corollary_thmcontent">
  <p>  Let \(X\) be a variety over \(k\). Same comclusion as above. </p>

  </div>
</div> </p>
<div class="proof_wrapper" id="a0000000065">
  <div class="proof_heading">
    <span class="proof_caption">
    Proof
    </span>
    <span class="expand-proof">▼</span>
  </div>
  <div class="proof_content">
  <p>\(X\) has an affine cover of finite type \(k\)-algebras. Thus, by hilbert basis, it is (locally) noetherian. Apply the previous theorem. </p>

  </div>
</div>

</div> <!--main-text -->
</div> <!-- content-wrapper -->
</div> <!-- content -->
</div> <!-- wrapper -->

<nav class="prev_up_next">
  <a href="sect0013.html" title="Kahler differentials"><svg  class="icon icon-arrow-left "><use xlink:href="symbol-defs.svg#icon-arrow-left"></use></svg>
</a>
  <a href="sect0009.html" title="Adjunction Formula"><svg  class="icon icon-arrow-up "><use xlink:href="symbol-defs.svg#icon-arrow-up"></use></svg>
</a>
  <a href="sect0015.html" title="Irreducible Schemes"><svg  class="icon icon-arrow-right "><use xlink:href="symbol-defs.svg#icon-arrow-right"></use></svg>
</a>
</nav>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/plastex.js"></script>
<script type="text/javascript" src="js/svgxuse.js"></script>
</body>
</html>